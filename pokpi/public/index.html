<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>2D RTS Game</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/ui.css">
  <!-- Import Three.js with a proper module specifier -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.module.js"
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
  <div id="game-container"></div>
  
  <!-- Update the debug overlay with more detailed camera controls -->
  <div id="debug-overlay" style="position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 5px; font-size: 12px;">
    <p>Camera Controls:</p>
    <ul>
      <li>Left-click + drag: Rotate camera</li>
      <li>Mouse wheel: Zoom in/out</li>
      <li>WASD/Arrow keys: Move camera position</li>
      <li>Q/E: Move camera up/down</li>
      <li>R: Reset camera</li>
    </ul>
  </div>
  
  <!-- Load game scripts -->
  <script type="module">
    import * as THREE from 'three';
    import { GameEngine } from './js/engine/core.js';
    import { cameraSystem } from './js/rts/systems/cameraSystem.js';
    import { backgroundSystem } from './js/rts/systems/backgroundSystem.js';
    
    // Make THREE globally available for other modules
    window.THREE = THREE;
    
    // Game instance
    let game;
    let selectedEntities = [];
    
    // Make these globally available
    window.selectedEntities = selectedEntities;
    window.updateSelectionUI = function() {
      const buildingSystem = game.getSystem('building');
      if (buildingSystem && buildingSystem.updateSelectionUI) {
        buildingSystem.updateSelectionUI();
      }
    };
    
    
    window.addEventListener('DOMContentLoaded', () => {
      initGame();
    });
    
    function initGame() {
      // Create game engine with darker background
      game = new GameEngine({
        parentElement: document.getElementById('game-container'),
        backgroundColor: 0x010103 // Extremely dark blue-black
      });
      
      // Make game globally available
      window.game = game;

      game.addSystem(backgroundSystem); // Keep the space background
      game.addSystem(cameraSystem);     // Keep camera controls

      game.start();
    }
    
  </script>
  
</body>
</html> 